% !TEX root = main.tex

\section{Представить списки в виде списочных ячеек}


\problem $'(open\; close\; halph)$
\vfill

\begin{center}\begin{tikzpicture}
	\node [conscell] (cell1) {};
	\node [conscell, right= of cell1] (cell2) {};
	\node [conscell, right= of cell2] (cell3) {};
	
	\draw [pointer] (c2 cell1) -- (cell2);
	\draw [pointer] (c2 cell2) -- (cell3);
	\draw [pointer] (c2 cell3) -- +(1,  0) node [anchor=west] {Nil};
	\draw [pointer] (c1 cell1) -- +(0, -1) node [anchor=north] {open};
	\draw [pointer] (c1 cell2) -- +(0, -1) node [anchor=north] {close};
	\draw [pointer] (c1 cell3) -- +(0, -1) node [anchor=north] {halph};
	
	\foreach \i in {cell1,cell2,cell3}{\draw[fill=red] (c1 \i)circle(2pt) (c2 \i)circle(2pt);}
\end{tikzpicture}\end{center}


\problem $'\bigl((open1)\;(close2)\;(halph3)\bigr)$
\vfill

\begin{center}\begin{tikzpicture}
	\node [conscell] (cell1) {};
	\node [conscell, right=2cm of cell1] (cell2) {};
	\node [conscell, right=2cm of cell2] (cell3) {};
	\node [conscell, below=    of cell1] (cell4) {};
	\node [conscell, below=    of cell2] (cell5) {};
	\node [conscell, below=    of cell3] (cell6) {};
	
	\draw [pointer] (c2 cell1) -- (cell2);
	\draw [pointer] (c2 cell2) -- (cell3);
	\draw [pointer] (c2 cell3) -- +(1, 0) node [anchor=west] {Nil};
	
	\draw [pointer] (c1 cell1) -- (cell4.135);
	\draw [pointer] (c1 cell2) -- (cell5.135);
	\draw [pointer] (c1 cell3) -- (cell6.135);
	
	\draw [pointer] (c1 cell4) -- +(0, -1) node [anchor=north] {open1};
	\draw [pointer] (c2 cell4) -- +(1,  0) node [anchor=west]  {Nil};
	
	\draw [pointer] (c1 cell5) -- +(0, -1) node [anchor=north] {close2};
	\draw [pointer] (c2 cell5) -- +(1,  0) node [anchor=west]  {Nil};
	
	\draw [pointer] (c1 cell6) -- +(0, -1) node [anchor=north] {halph3};
	\draw [pointer] (c2 cell6) -- +(1,  0) node [anchor=west]  {Nil};
	
	
	\foreach \i in {cell1,cell2,cell3,cell4,cell5,cell6}{\draw[fill=red] (c1 \i)circle(2pt) (c2 \i)circle(2pt);}
\end{tikzpicture}\end{center}
\vfill

\problem $'\biggl((one)\; f\!or\; all\; \Bigl(and\; \bigl(me\; (f\!or\; you)\bigr)\!\Bigr)\!\biggr)$
\vfill

\begin{center}\begin{tikzpicture}
	\node [conscell] (cell1) {};
	\node [conscell, right=2cm of cell1] (cell2) {};
	\node [conscell, right=    of cell2] (cell3) {};
	\node [conscell, right=    of cell3] (cell4) {};
	\node [conscell, below=    of cell1] (cell5) {};
	\node [conscell, below=2cm of cell2] (cell6) {};
	\node [conscell, right=    of cell6] (cell7) {};
	\node [conscell, below=    of cell7] (cell8) {};
	\node [conscell, right=    of cell8] (cell9) {};
	\node [conscell, below=    of cell9] (cell10) {};
	\node [conscell, right=    of cell10] (cell11) {};
	
	
	\draw [pointer] (c2 cell1) -- (cell2);
	\draw [pointer] (c2 cell2) -- (cell3);
	\draw [pointer] (c2 cell3) -- (cell4);
	\draw [pointer] (c2 cell4) -- +(1, 0) node [anchor=west] {Nil};
	
	\draw [pointer] (c1 cell1) -- (cell5.135);
	\draw [pointer] (c1 cell2) -- +(0, -1) node [anchor=north] {for};
	\draw [pointer] (c1 cell3) -- +(0, -1) node [anchor=north] {all};
	\draw [-,thick] (c1 cell4) -- +(0, -2) node (t1) {};
	\draw [pointer] (t1.text)  -| (cell6.135);
	
	
	\draw [pointer] (c1 cell5) -- +(0, -1) node [anchor=north] {one};
	\draw [pointer] (c2 cell5) -- +(1, 0) node [anchor=west] {Nil};
	
	
	\draw [pointer] (c2 cell6) -- (cell7);
	\draw [pointer] (c2 cell7) -- +(1, 0) node [anchor=west] {Nil};
	
	\draw [pointer] (c1 cell6) -- +(0, -1) node [anchor=north] {and};
	\draw [pointer] (c1 cell7) -- (cell8.135);
	
	
	\draw [pointer] (c2 cell8) -- (cell9);
	\draw [pointer] (c2 cell9) -- +(1, 0) node [anchor=west] {Nil};
	
	\draw [pointer] (c1 cell8) -- +(0, -1) node [anchor=north] {me};
	\draw [pointer] (c1 cell9) -- (cell10.135);
	
	
	\draw [pointer] (c2 cell10) -- (cell11);
	\draw [pointer] (c2 cell11) -- +(1, 0) node [anchor=west] {Nil};
	
	\draw [pointer] (c1 cell10) -- +(0, -1) node [anchor=north] {for};
	\draw [pointer] (c1 cell11) -- +(0, -1) node [anchor=north] {you};
	
	
	\foreach \i in {cell1,cell2,cell3,cell4,cell5,cell6,cell7,cell8,cell9,cell10,cell11}{\draw[fill=red] (c1 \i)circle(2pt) (c2 \i)circle(2pt);}
\end{tikzpicture}\end{center}
\vfill


\newpage
\problem $'\bigl((tool)\;(call)\bigr)$
\vfill

\begin{center}\begin{tikzpicture}
	\node [conscell] (cell1) {};
	\node [conscell, right=2cm of cell1] (cell2) {};
	\node [conscell, below=    of cell1] (cell3) {};
	\node [conscell, below=    of cell2] (cell4) {};
	
	\draw [pointer] (c2 cell1) -- (cell2);
	\draw [pointer] (c2 cell2) -- +(1, 0) node [anchor=west] {Nil};
	
	\draw [pointer] (c1 cell1) -- (cell3.135);
	\draw [pointer] (c1 cell2) -- (cell4.135);
	
	\draw [pointer] (c1 cell3) -- +(0, -1) node [anchor=north] {tool};
	\draw [pointer] (c2 cell3) -- +(1,  0) node [anchor=west]  {Nil};
	
	\draw [pointer] (c1 cell4) -- +(0, -1) node [anchor=north] {call};
	\draw [pointer] (c2 cell4) -- +(1,  0) node [anchor=west]  {Nil};
	
	
	\foreach \i in {cell1,cell2,cell3,cell4}{\draw[fill=red] (c1 \i)circle(2pt) (c2 \i)circle(2pt);}
\end{tikzpicture}\end{center}
\vfill
 

\problem $'\Bigl((tool1)\;\bigl((call2)\bigr)\;\bigl((sell)\bigr)\Bigr)$
\vfill

\begin{center}\begin{tikzpicture}
	\node [conscell] (cell1) {};
	\node [conscell, right=2cm of cell1] (cell2) {};
	\node [conscell, right=2cm of cell2] (cell3) {};
	\node [conscell, below=    of cell1] (cell4) {};
	\node [conscell, below=    of cell2] (cell5) {};
	\node [conscell, below=    of cell3] (cell6) {};
	\node [conscell, below=    of cell5] (cell7) {};
	\node [conscell, below=    of cell6] (cell8) {};
	
	\draw [pointer] (c2 cell1) -- (cell2);
	\draw [pointer] (c2 cell2) -- (cell3);
	\draw [pointer] (c2 cell3) -- +(1, 0) node [anchor=west] {Nil};
	
	\draw [pointer] (c1 cell1) -- (cell4.135);
	\draw [pointer] (c1 cell2) -- (cell5.135);
	\draw [pointer] (c1 cell3) -- (cell6.135);
	
	\draw [pointer] (c1 cell4) -- +(0, -1) node [anchor=north] {tool1};
	\draw [pointer] (c2 cell4) -- +(1,  0) node [anchor=west]  {Nil};
	
	\draw [pointer] (c1 cell5) -- (cell7.135);
	\draw [pointer] (c2 cell5) -- +(1,  0) node [anchor=west]  {Nil};
	
	\draw [pointer] (c1 cell6) -- (cell8.135);
	\draw [pointer] (c2 cell6) -- +(1,  0) node [anchor=west]  {Nil};
	
	\draw [pointer] (c1 cell7) -- +(0, -1) node [anchor=north] {call2};
	\draw [pointer] (c2 cell7) -- +(1,  0) node [anchor=west]  {Nil};
	
	\draw [pointer] (c1 cell8) -- +(0, -1) node [anchor=north] {sell};
	\draw [pointer] (c2 cell8) -- +(1,  0) node [anchor=west]  {Nil};
	
	\foreach \i in {cell1,cell2,cell3,cell4,cell5,cell6,cell7,cell8}{\draw[fill=red] (c1 \i)circle(2pt) (c2 \i)circle(2pt);}
\end{tikzpicture}\end{center}
\vfill


\problem $'\Bigl(\bigl((tool)\;(call)\bigr)\;\bigl((sell)\bigr)\Bigr)$
\vfill

\begin{center}\begin{tikzpicture}
	\node [conscell] (cell1) {};
	\node [conscell, right=6cm of cell1] (cell2) {};
	\node [conscell, below=    of cell1] (cell3) {};
	\node [conscell, right=2cm of cell3] (cell4) {};
	\node [conscell, below=    of cell2] (cell5) {};
	\node [conscell, below=    of cell3] (cell6) {};
	\node [conscell, below=    of cell4] (cell7) {};
	\node [conscell, below=    of cell5] (cell8) {};

	
	\draw [pointer] (c2 cell1) -- (cell2);
	\draw [pointer] (c2 cell2) -- +(1, 0) node [anchor=west] {Nil};

	\draw [pointer] (c1 cell1) -- (cell3.135);
	\draw [pointer] (c1 cell2) -- (cell5.135);

	
	\draw [pointer] (c2 cell3) -- (cell4);
	\draw [pointer] (c2 cell4) -- +(1, 0) node [anchor=west] {Nil};
	\draw [pointer] (c2 cell5) -- +(1, 0) node [anchor=west] {Nil};

	\draw [pointer] (c1 cell3) -- (cell6.135);
	\draw [pointer] (c1 cell4) -- (cell7.135);
	\draw [pointer] (c1 cell5) -- (cell8.135);

	
	\draw [pointer] (c2 cell6) -- +(1,  0) node [anchor=west]  {Nil};
	\draw [pointer] (c1 cell6) -- +(0, -1) node [anchor=north] {tool};
	
	
	\draw [pointer] (c2 cell7) -- +(1,  0) node [anchor=west]  {Nil};
	\draw [pointer] (c1 cell7) -- +(0, -1) node [anchor=north] {cool};
	
	
	\draw [pointer] (c2 cell8) -- +(1,  0) node [anchor=west]  {Nil};
	\draw [pointer] (c1 cell8) -- +(0, -1) node [anchor=north] {sell};


	\foreach \i in {cell1,cell2,cell3,cell4,cell5,cell6,cell7,cell8}{\draw[fill=red] (c1 \i)circle(2pt) (c2 \i)circle(2pt);}
\end{tikzpicture}\end{center}
\vfill



\newpage
\section{Используя только функции \texttt{CAR} и \texttt{CDR}, написать выражение}

\problem Возвращающие второй элемент списка

\begin{lstlisting}
(car (cdr example-list)) == (cadr example-list)
\end{lstlisting}


\problem Возвращающие третий элемент списка

\begin{lstlisting}
(car (cdr (cdr example-list))) == (caddr example-list)
\end{lstlisting}


\problem Возвращающие четвёртый элемент списка

\begin{lstlisting}
(cadddr example-list)
\end{lstlisting}



\section{Вычислить результат выражения}

\problem \hfill

\begin{lstlisting}
(caadr '((blue cube) (red pyramid))) => RED
\end{lstlisting}


\problem \hfill

\begin{lstlisting}
(cdar '((abc) (def) (ghi))) => NIL
\end{lstlisting}


\problem \hfill

\begin{lstlisting}
(cadr '((abc) (def) (ghi))) => (DEF)
\end{lstlisting}


\problem \hfill

\begin{lstlisting}
(caddr '((abc) (def) (ghi))) => (GHI)
\end{lstlisting}


\problem \hfill

\begin{lstlisting}
(list 'Fred 'and Wilma) => Unbound variable WILMA
\end{lstlisting}


\problem \hfill

\begin{lstlisting}
(list 'Fred '(and Wilma)) => (FRED (AND WILMA))
\end{lstlisting}


\problem \hfill

\begin{lstlisting}
(cons Nil Nil) => (NIL)
\end{lstlisting}


\problem \hfill

\begin{lstlisting}
(cons T Nil) => (T)
\end{lstlisting}


\problem \hfill

\begin{lstlisting}
(cons Nil T) => (NIL . T)
\end{lstlisting}


\problem \hfill

\begin{lstlisting}
(list Nil) => (NIL)
\end{lstlisting}


\problem \hfill

\begin{lstlisting}
(cons (T) Nil) => Undefined function T
\end{lstlisting}


\problem \hfill

\begin{lstlisting}
(list '(one two) '(free temp)) => ((ONE TWO) (FREE TEMP))
\end{lstlisting}


\problem \hfill

\begin{lstlisting}
(cons 'Fred '(and Wilma)) => (FRED AND WILMA)
\end{lstlisting}


\problem \hfill

\begin{lstlisting}
(cons 'Fred '(Wilma)) => (FRED WILMA)
\end{lstlisting}


\problem \hfill

\begin{lstlisting}
(list Nil Nil) => (NIL NIL)
\end{lstlisting}


\problem \hfill

\begin{lstlisting}
(list T Nil) => (T NIL)
\end{lstlisting}


\problem \hfill

\begin{lstlisting}
(list Nil T) => (NIL T)
\end{lstlisting}


\problem \hfill

\begin{lstlisting}
(cons T (list Nil)) => (T NIL)
\end{lstlisting}


\problem \hfill

\begin{lstlisting}
(list (T) Nil) => Undefined function T
\end{lstlisting}


\problem \hfill
\begin{lstlisting}
(cons '(one two) '(free temp)) => ((ONE TWO) FREE TEMP)
\end{lstlisting}



\newpage
\section{Написать функции и представить результаты в виде списочных ячеек}

\vfill
\problem Функция от четырёх аргументов возвращающая список вида 
\[
	\bigl((arg1\; arg2)\; (arg3\; arg4)\bigr)
\]

\vfill
\biglisting{../../Problems/src/problem-5-1.lisp}

\begin{center}\begin{tikzpicture}
	\node [conscell] (cell1) {};
	\node [conscell, right=5cm of cell1] (cell2) {};
	\node [conscell, below=    of cell1] (cell3) {};
	\node [conscell, right=    of cell3] (cell4) {};
	\node [conscell, below=    of cell2] (cell5) {};
	\node [conscell, right=    of cell5] (cell6) {};
	
	
	\draw [pointer] (c2 cell1) -- (cell2);
	\draw [pointer] (c2 cell2) -- +(1, 0) node [anchor=west] {Nil};
	
	\draw [pointer] (c1 cell1) -- (cell3.135);
	\draw [pointer] (c1 cell2) -- (cell5.135);
	
	
	\draw [pointer] (c2 cell3) -- (cell4);
	\draw [pointer] (c2 cell4) -- +(1, 0) node [anchor=west] {Nil};
	
	\draw [pointer] (c1 cell3) -- +(0, -1) node [anchor=north] {arg1};
	\draw [pointer] (c1 cell4) -- +(0, -1) node [anchor=north] {arg2};
	
	\draw [pointer] (c2 cell5) -- (cell6);
	\draw [pointer] (c2 cell6) -- +(1, 0) node [anchor=west] {Nil};
	
	\draw [pointer] (c1 cell5) -- +(0, -1) node [anchor=north] {arg3};
	\draw [pointer] (c1 cell6) -- +(0, -1) node [anchor=north] {arg4};
	
	
	\foreach \i in {cell1,cell2,cell3,cell4,cell5,cell6}{\draw[fill=red] (c1 \i)circle(2pt) (c2 \i)circle(2pt);}
\end{tikzpicture}\end{center}
\vfill


\problem Функция от двух аргументов возвращающая список вида
\[
	\bigl((arg1)\; (arg2)\bigr)
\]

\vfill
\biglisting{../../Problems/src/problem-5-2.lisp}

\begin{center}\begin{tikzpicture}
	\node [conscell] (cell1) {};
	\node [conscell, right=2.5cm of cell1] (cell2) {};
	\node [conscell, below=      of cell1] (cell3) {};
	\node [conscell, below=      of cell2] (cell4) {};
	
	\draw [pointer] (c2 cell1) -- (cell2);
	\draw [pointer] (c2 cell2) -- +(1, 0) node [anchor=west] {Nil};
	
	\draw [pointer] (c1 cell1) -- (cell3.135);
	\draw [pointer] (c1 cell2) -- (cell4.135);
	
	\draw [pointer] (c1 cell3) -- +(0, -1) node [anchor=north] {arg1};
	\draw [pointer] (c2 cell3) -- +(1,  0) node [anchor=west]  {Nil};
	
	\draw [pointer] (c1 cell4) -- +(0, -1) node [anchor=north] {arg2};
	\draw [pointer] (c2 cell4) -- +(1,  0) node [anchor=west]  {Nil};
	
	
	\foreach \i in {cell1,cell2,cell3,cell4}{\draw[fill=red] (c1 \i)circle(2pt) (c2 \i)circle(2pt);}
\end{tikzpicture}\end{center}
\vfill


\newpage
\problem Функция от одного аргумента возвращающая список вида
\[
	\Bigl(\!\bigl((arg)\bigr)\!\Bigr)
\]
\vspace{0.2cm}

\biglisting{../../Problems/src/problem-5-3.lisp}

\begin{center}\begin{tikzpicture}
	\node [conscell] (cell1) {};
	\node [conscell, below= of cell1] (cell2) {};
	\node [conscell, below= of cell2] (cell3) {};
	
	
	\draw [pointer] (c2 cell1) -- +(1, 0) node [anchor=west] {Nil};
	
	\draw [pointer] (c1 cell1) -- (cell2.135);

	
	\draw [pointer] (c2 cell2) -- +(1,  0) node [anchor=west]  {Nil};
	
	\draw [pointer] (c1 cell2) -- (cell3.135);
	
	
	\draw [pointer] (c2 cell3) -- +(1,  0) node [anchor=west]  {Nil};
	
	\draw [pointer] (c1 cell3) -- +(0, -1) node [anchor=north] {arg};
	
	
	\foreach \i in {cell1,cell2,cell3}{\draw[fill=red] (c1 \i)circle(2pt) (c2 \i)circle(2pt);}
\end{tikzpicture}\end{center}



\section{Заключение}

В данной лабораторной работе было изучено понятие \textit{списочной ячейки} и составление \textit{диаграммы представления списка в виде списочных ячеек}. Помимо определения новой функции при помощи макроса \verb|defun|, так же были рассмотрены:
\begin{itemize}
	\item специальный оператор \verb|quote| или \verb|'| --- блокирует вычисление выражения;
	\item функция \verb|car| --- возвращает \textit{car-часть списочной ячейки} или если рассматривается список, то говорят о \textit{первом элементе списка}, который является S-выражением т.\,е. \textit{голова списка};
	\item функция \verb|cdr| --- возвращает \textit{cdr-часть списочной ячейки} или если рассматривается список, то говорят о \textit{списке из оставшихся элементов} за исключением первого т.\,е. \textit{хвост списка};
	\item функция \verb|cons| --- создаёт новую \textit{списочную ячейку}, у которой \textit{car-часть} принимает первый аргумент, а \textit{cdr-часть} --- второй аргумент;
	\item функция \verb|list| --- возвращает \textit{список} из элементов переданных ей в качестве аргументов.
\end{itemize}